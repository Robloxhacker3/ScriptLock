<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Roblox Scripts Gallery</title>
<style>
  :root{
    --bg:#071228; --card:#0e1620; --muted:#9aa4b2; --accent:#6ee7b7;
  }
  body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#04111a,#071228);color:#e6eef6}
  .wrap{max-width:1100px;margin:20px auto;padding:16px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  h1{margin:0;font-size:18px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px;margin-top:14px}
  .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);box-shadow:0 8px 24px rgba(0,0,0,0.6)}
  .thumb{height:130px;border-radius:8px;background-size:cover;background-position:center}
  .meta{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
  .title{font-weight:700}
  .desc{font-size:12px;color:var(--muted)}
  .btn{background:var(--accent);color:#032d24;border:none;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:700}
  .btn.secondary{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.03)}
  footer{margin-top:18px;color:var(--muted);text-align:center;font-size:13px}
  /* modal */
  .backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,10,0.6);z-index:60}
  .modal{width:min(760px,96%);background:var(--card);padding:16px;border-radius:12px;position:relative}
  .close-x{position:absolute;right:14px;top:10px;cursor:pointer;color:var(--muted)}
  .ad-area{min-height:110px;border-radius:8px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;border:1px dashed rgba(255,255,255,0.03);padding:12px;color:var(--muted)}
  .countdown{font-weight:800;font-size:22px;margin-top:8px}
  .script-box{margin-top:12px;background:#071018;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);max-height:360px;overflow:auto;white-space:pre-wrap}
  .copy-row{display:flex;justify-content:flex-end;gap:8px;margin-top:8px}
  .hidden{display:none!important}
  /* small popup */
  .popup{position:fixed;right:18px;bottom:18px;width:300px;border-radius:10px;background:linear-gradient(180deg,#071220,#0b2735);padding:10px;box-shadow:0 10px 30px rgba(0,0,0,0.6);display:none;z-index:70}
  .ad-small{height:80px;border-radius:8px;border:1px dashed rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;color:var(--muted)}
  @media (max-width:520px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>Roblox Scripts Gallery</h1>
    <div style="font-size:13px;color:var(--muted)">Ad area placeholder — insert AdSense inside the modal ad container (see comments)</div>
  </header>

  <section class="grid" id="gallery"></section>

  <footer>
    Template: Replace the ad placeholders with your own AdSense snippet. Do NOT instruct users to click ads. This template shows an ad area and a short wait before revealing content to be AdSense-friendly.
  </footer>
</div>

<!-- Hidden raw JSON data (DO NOT render / not used for UI directly) -->
<script id="raw-data" type="application/json">
[
  {
    "script_name":"AutoJump",
    "script_code":"-- AutoJump.lua\\nwhile wait() do\\n  local plr = game.Players.LocalPlayer\\n  if plr and plr.Character and plr.Character:FindFirstChild(\"Humanoid\") then\\n    plr.Character.Humanoid.Jump = true\\n  end\\nend",
    "script_imagelink":"https://via.placeholder.com/600x400?text=AutoJump"
  },
  {
    "script_name":"InfiniteJump",
    "script_code":"-- InfiniteJump.lua\\nlocal hum = game.Players.LocalPlayer.Character:WaitForChild('Humanoid')\\nhum:GetPropertyChangedSignal('JumpPower'):Connect(function() end)\\n-- simple placeholder script",
    "script_imagelink":"https://via.placeholder.com/600x400?text=InfiniteJump"
  },
  {
    "script_name":"SpeedBoost",
    "script_code":"-- SpeedBoost.lua\\nlocal plr = game.Players.LocalPlayer\\nif plr.Character and plr.Character:FindFirstChild('Humanoid') then\\n  plr.Character.Humanoid.WalkSpeed = 50\\nend",
    "script_imagelink":"https://via.placeholder.com/600x400?text=SpeedBoost"
  },
  {
    "script_name":"FlyToggle",
    "script_code":"-- FlyToggle.lua\\n-- placeholder orthogonal fly script\\nprint('Fly toggled (placeholder)')",
    "script_imagelink":"https://via.placeholder.com/600x400?text=FlyToggle"
  },
  {
    "script_name":"ESP_Basic",
    "script_code":"-- ESP_Basic.lua\\nfor i,v in pairs(game.Players:GetPlayers()) do\\n  if v.Character and v.Character:FindFirstChild('Head') then\\n    -- placeholder ESP\\n  end\\nend",
    "script_imagelink":"https://via.placeholder.com/600x400?text=ESP"
  },
  {
    "script_name":"AutoFarm",
    "script_code":"-- AutoFarm.lua\\n-- placeholder auto farm code\\nprint('AutoFarm engaged')",
    "script_imagelink":"https://via.placeholder.com/600x400?text=AutoFarm"
  },
  {
    "script_name":"NoClip",
    "script_code":"-- NoClip.lua\\n-- placeholder noclip\\nprint('NoClip active')",
    "script_imagelink":"https://via.placeholder.com/600x400?text=NoClip"
  }
]
</script>

<!-- Gate modal (shows ad area + countdown) -->
<div class="backdrop" id="gateModal" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <span class="close-x" onclick="closeGate()">✕</span>
    <h2 id="modalTitle">Unlock script</h2>

    <!-- AD PLACEHOLDER: Paste your AdSense code inside the #adContainer below.
         IMPORTANT:
         - Replace data-ad-client with your publisher id when deploying (example: ca-pub-YOURIDHERE).
         - Do NOT add wording that asks users to click ads.
         - This placeholder prevents any automatic clicking or encouragement to click.
    -->
    <div class="ad-area" id="adContainer">
      <div style="text-align:center;">
        <div style="font-weight:700;color:var(--muted)">Ad will appear here</div>
        <div style="font-size:12px;color:var(--muted)">(Insert AdSense snippet into the HTML where directed)</div>
        <!-- Example sanitized snippet (replace slot and publisher id in your deployed file):
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-YOURIDHERE"
             data-ad-slot="1234567890"
             data-ad-format="auto"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        -->
      </div>
    </div>

    <div style="display:flex;gap:12px;align-items:center;margin-top:12px;">
      <div>
        <div style="font-size:13px;color:var(--muted)">Waiting time</div>
        <div class="countdown" id="countdown">3</div>
      </div>
      <div style="margin-left:auto">
        <button class="btn secondary" onclick="closeGate()">Cancel</button>
        <button class="btn" id="revealBtn" disabled onclick="revealScript()">Reveal</button>
      </div>
    </div>

    <div class="script-box hidden" id="scriptBox">
      <div style="font-weight:800" id="scriptName">Script name</div>
      <pre id="scriptCode" style="margin-top:8px"></pre>
      <div class="copy-row">
        <button class="btn secondary" onclick="closeGate()">Close</button>
        <button class="btn" id="copyBtn" onclick="copyScript()">Copy to clipboard</button>
        <button class="btn" id="downloadBtn" onclick="downloadScript()">Download</button>
      </div>
    </div>

    <div style="margin-top:10px;color:var(--muted);font-size:12px">
      Note: This template displays an ad slot and a short wait before revealing the script. Do not ask users to click ads. Replace the placeholder with your AdSense code and follow Google policies.
    </div>
  </div>
</div>

<!-- small popup ad (non-invasive) -->
<div class="popup" id="popupAd">
  <div style="display:flex;gap:10px;align-items:center">
    <div style="flex:1">
      <div class="ad-small" id="popupAdInner">Popup ad area (replace with ad code if desired)</div>
      <div style="font-size:12px;color:var(--muted);margin-top:8px">Sponsored</div>
    </div>
    <div style="margin-left:8px">
      <button class="btn secondary" onclick="document.getElementById('popupAd').style.display='none'">Close</button>
    </div>
  </div>
</div>

<script>
/*
  Behavior:
  - Loads JSON from #raw-data (hidden).
  - Renders cards for each script (name + thumbnail).
  - When user clicks "Get", opens modal showing ad area and a 3-second countdown.
  - After countdown ends, Reveal button enables; user clicks Reveal to see script.
  - Copy & Download buttons only available after reveal.
  - IMPORTANT: Do NOT instruct users to click ads. This flow shows an ad slot and waits 3s before revealing content.
*/

const rawJson = document.getElementById('raw-data').textContent;
let scripts = [];
try {
  scripts = JSON.parse(rawJson);
} catch(e) {
  console.error('Invalid JSON in raw-data');
}

const gallery = document.getElementById('gallery');
scripts.forEach((s, idx) => {
  const card = document.createElement('div');
  card.className = 'card';
  card.dataset.index = idx;
  card.dataset.name = s.script_name || `Script ${idx+1}`;
  card.dataset.code = s.script_code || '-- no code --';
  const thumb = document.createElement('div');
  thumb.className = 'thumb';
  thumb.style.backgroundImage = `url('${s.script_imagelink || 'https://via.placeholder.com/600x400?text=Script'}')`;
  const meta = document.createElement('div');
  meta.className = 'meta';
  meta.innerHTML = `<div><div class="title">${escapeHtml(s.script_name)}</div><div class="desc">Click to unlock</div></div>
                    <div><button class="btn" onclick="openGate(${idx})">Get</button></div>`;
  card.appendChild(thumb);
  card.appendChild(meta);
  gallery.appendChild(card);
});

let currentIndex = null;
let countdownTimer = null;
function openGate(idx) {
  currentIndex = idx;
  const title = scripts[idx].script_name || 'Script';
  document.getElementById('modalTitle').innerText = `Unlock: ${title}`;
  document.getElementById('countdown').innerText = '3';
  document.getElementById('revealBtn').disabled = true;
  document.getElementById('scriptBox').classList.add('hidden');
  document.getElementById('gateModal').style.display = 'flex';
  startCountdown(3);
}

function closeGate() {
  document.getElementById('gateModal').style.display = 'none';
  clearInterval(countdownTimer);
  currentIndex = null;
}

function startCountdown(seconds){
  let s = seconds;
  const display = document.getElementById('countdown');
  display.innerText = s;
  clearInterval(countdownTimer);
  countdownTimer = setInterval(()=>{
    s--;
    if(s <= 0){
      clearInterval(countdownTimer);
      display.innerText = '0';
      document.getElementById('revealBtn').disabled = false;
    } else {
      display.innerText = s;
    }
  }, 1000);
}

function revealScript(){
  if(currentIndex === null) return;
  document.getElementById('revealBtn').disabled = true;
  const data = scripts[currentIndex];
  document.getElementById('scriptName').innerText = data.script_name || 'Script';
  document.getElementById('scriptCode').innerText = data.script_code || '-- no code --';
  document.getElementById('scriptBox').classList.remove('hidden');

  // enable copy/download buttons
  document.getElementById('copyBtn').disabled = false;
  document.getElementById('downloadBtn').disabled = false;
}

function copyScript(){
  const code = document.getElementById('scriptCode').innerText;
  navigator.clipboard.writeText(code).then(()=> {
    alert('Script copied to clipboard');
  }, ()=> alert('Unable to copy'));
}

function downloadScript(){
  const code = document.getElementById('scriptCode').innerText;
  const name = (document.getElementById('scriptName').innerText || 'script').replace(/\s+/g,'_') + '.lua';
  const blob = new Blob([code], {type:'text/plain;charset=utf-8'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = name;
  document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);
}

// Random popup ad (non-invasive)
(function randomPopup(){
  const min = 25; const max = 65;
  function schedule(){
    const t = Math.floor(Math.random() * (max - min + 1)) + min;
    setTimeout(()=>{ showPopupAd(); schedule(); }, t * 1000);
  }
  function showPopupAd(){
    const el = document.getElementById('popupAd');
    el.style.display = 'block';
    setTimeout(()=>{ el.style.display='none'; }, 12 * 1000);
  }
  schedule();
})();

// Utility escape
function escapeHtml(s){ if(!s) return ''; return s.replace(/[&<>"']/g, ch => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[ch])); }

// Close modal on Escape
document.addEventListener('keydown', function(e){ if(e.key === 'Escape'){ closeGate(); document.getElementById('popupAd').style.display='none'; }});
</script>
</body>
</html>
